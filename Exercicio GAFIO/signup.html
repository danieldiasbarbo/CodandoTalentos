<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAFio</title>
    <link rel="stylesheet" href="css/style.css">
    <script>
        function concatenarErroSenha(incremento, errorLog) {
            console.log("Entrou em concatenarErroSenha");
            if (errorLog.length == 0) {
                errorLog = errorLog + "Insira uma senha que tenha pelo menos: <br>" + incremento;
                console.log("Caso primeiro errorLog");
            } else {
                errorLog = errorLog + "<br>" + incremento;
                console.log("Caso outro errorLog");
            }
            console.log("Saiu concatenarErroSenha");
            return errorLog;
        }
        function errorLogComprimento(texto, errorLog) {
            console.log("Entrou em errorLogComprimento");
            if (texto.length <= 8) {
                errorLog = concatenarErroSenha("8 dígitos", errorLog);
                console.log("Comprimento menor que 8");
            }
            console.log("Saiu de errorLogComprimento, error log: ", errorLog);
            return errorLog;
        }
        function errorLogMaiuscula(texto, errorLog){
            console.log("Entrou em errorLogMaiuscula");
            //Verifica se a senha contém letras maiúsculas
            let contemMaiuscula = false;
            let i = 0;
            while (i <= texto.length){
                let caracter = texto.charAt(i);
                if (isNaN(caracter * 1)){
                    if (caracter == caracter.toUpperCase()) {
                        contemMaiuscula = true;
                        break;
                    }
                }
                i++;
                console.log("Laço de repetição maiuscula i = ", i);
            }
            if (!contemMaiuscula) {
                errorLog = concatenarErroSenha("1 letra maiúscula", errorLog)
            }
            return errorLog
        }
        function errorLogMinuscula(texto, errorLog) {
            console.log("Entrou em errorLogMaiuscula");
            //Verifica se a senha contém letras maiúsculas
            let contemMinuscula = false;
            let i = 0;
            while (i <= texto.length){
                let caracter = texto.charAt(i);
                if (isNaN(caracter * 1)){
                    if (caracter == caracter.toLowerCase()) {
                        contemMinuscula = true;
                        break;
                    }
                }
                i++;
                console.log("Laço de repetição maiuscula i = ", i);
            }
            if (!contemMinuscula) {
                errorLog = concatenarErroSenha("1 letra minúscula", errorLog)
            }
            return errorLog
        }
        function errorLogSenha(){
            let retornoErrorLogSenha = "";
            let senha = document.getElementById("senha").value;
            retornoErrorLogSenha = errorLogComprimento(senha, retornoErrorLogSenha);
            retornoErrorLogSenha = errorLogMaiuscula(senha, retornoErrorLogSenha);
            retornoErrorLogSenha = errorLogMinuscula(senha, retornoErrorLogSenha)
            if (retornoErrorLogSenha != 0) {
                retornoErrorLogSenha += ".";
            }
            document.getElementById("validadeSenha").innerHTML = retornoErrorLogSenha;
        }
    </script>
</head>

<body>
    <header>
        <table style="width: 100%;">
            <tr>
                <th style="text-align: left; padding-left: 2%;">
                    <a class="logo" href="index.html" style="font-size: 4em;"><b>GAFio</b></a>
                </th>
                <th style="text-align: right;">
                    <a href="index.html"><img src="images/fiocruz.png" alt="ícone fiocruz" width="750" height="420" class="cabecalho" style="width: 10em; height: auto;"></a></th>
                </th>
            </tr>
        </table>
    </header>

    <section>
        <form action="signup.php" method="POST">
            <div class="campo">
                <label for="nome">Nome completo</label>
                <br>
                <input type="text" name="nome" id="nome" placeholder="insira seu nome" required>
            </div>
    
            <div class="campo">
                <label for="email">Email:</label>
                <br>
                <input type="email" name="email" id="email" placeholder="insira seu e-mail" required>
            </div>
    
            <div class="campo">
                <label for="senha">Senha:</label>
                <br>
                <input type="password" name="senha" id="senha" placeholder="insira sua senha" required>
                <p id="validadeSenha"></p>
                <script>
                    document.getElementById("senha").addEventListener("change", errorLogSenha)
                </script>
            </div>
    
            <button type="submit">Cadastrar</button>
            <button type="reset">Limpar</button>
        </form>
    </section>

    <footer>
        <div>
            <a class="logo" href="https://github.com/danieldiasbarbo" target="_blank" style="text-align: center;">     
                <b>danieldiasbarbo</b>
                <img src="images/github.png" alt="ícone github" style="height: 1em; width: auto">
            </a>
        </div>
    </footer>
</body>
</html>